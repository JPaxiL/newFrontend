<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" name="fullScreenSpinner" size = "medium" color = "#fff" type = "ball-rotate" [fullScreen] = "true">
  <p *ngIf="!areVehiclesLoaded && !areZonesLoaded" style="color: #ffffff" > Cargando vehículos y zonas... </p>
  <p *ngIf="!areVehiclesLoaded && areZonesLoaded" style="color: #ffffff" > Cargando vehículos... </p>
  <p *ngIf="areVehiclesLoaded && !areZonesLoaded" style="color: #ffffff" > Cargando zonas... </p>
  <p *ngIf="areVehiclesLoaded && areZonesLoaded" style="color: #ffffff" > {{ fullScreenSpinnerMsg }} </p>
</ngx-spinner>

<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" name="reloadSpinner" size = "medium" color = "#fff" type = "ball-rotate" [fullScreen] = "true"><p style="color: white" > Recargando página... </p></ngx-spinner>

<p-dialog [position]="popupDialogPosition" [(visible)]="showBlockedTabDialog" key="blockedTabDialog" [style]="popupDialogInlineStyle" [closable]="false" [draggable]="false" [modal]="true" id="dialogTest" styleClass="allow-popup-dialog">
  <ng-template pTemplate="header" *ngIf="popupDialogPosition != 'center' || unknownBrowser">
    <div class="pointer-arrows-container">
      <i class="pi pi-angle-double-up" style="font-size: 2rem;"></i>
      <i class="pi pi-angle-double-up" style="font-size: 2rem;"></i>
      <i class="pi pi-angle-double-up" style="font-size: 2rem;"></i>
      <i class="pi pi-angle-double-up" style="font-size: 2rem;"></i>
      <i class="pi pi-angle-double-up" style="font-size: 2rem;"></i>
    </div>
  </ng-template>

  <h4 *ngIf="isChrome">Haz clic en
    <img src="./assets/images/popup-icon-chrome.jpg">
    para habilitar las ventanas emergentes</h4>
  <h4 *ngIf="isOpera">Haz clic en
    <img src="./assets/images/popup-icon-opera.jpg">
    para habilitar las ventanas emergentes</h4>
  <h4 *ngIf="isFirefox">
    Haz clic en el botón "Opciones" para habilitar las ventanas emergentes</h4>
  <h4 *ngIf="isSafari">Haz clic en
    <img src="./assets/images/popup-icon-safari.jpg">
    para habilitar las ventanas emergentes</h4>
  <h4 *ngIf="unknownBrowser">Bloqueo de ventanas emergentes / pop-ups</h4>
    El navegador ha bloqueado el reporte en una nueva pestaña. Por favor, habilita/permite las ventanas emergentes.
    <!-- <svg viewBox="0 2 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" style="pointer-events: none; display: inline-block; height: 1.8rem;"><g>
      <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></g>
    </svg> -->
  <p-footer>
    <button type="button" pButton class="btn-gl-save btn-dark-hover" label="Entendido" (click)="dismissBlockedTabDialog();"></button>
  </p-footer>
</p-dialog>

<p-confirmDialog #cd [style]="{width: '30rem'}" [breakpoints]="{'960px': '50vw', '640px': '75vw'}" class="gl-confirm-dialog" key="newTabConfirmation" [closable]="false">
  <ng-template pTemplate="header">
    <h3>Confirmación</h3>
  </ng-template>
  <ng-template pTemplate="footer">
    <div class="col-4">
      <button type="button" class="btn-gl-save btn-dark-hover btn-sm w-100" (click)="cd.accept()">Sí</button>
    </div>
    <div class="col-4">
      <button type="button" class="btn-gl-cancel btn-dark-hover btn-sm w-100" (click)="cd.reject()">No</button>
    </div>
  </ng-template>
</p-confirmDialog>
<p-card>
  <ng-template pTemplate="header">
    <span class="d-block p-2 text-white">
      <i class="fas fa-chart-bar"></i>Panel de Reportes</span>
  </ng-template>
    <div class="p-fluid y-form-container" style="font-size: 0.9rem;">
      <div class="row">
        <div class="p-field">
          <label class="bg-subtitle">Reporte :</label>
          <p-dropdown [options]="reports" [(ngModel)]="selectedReport" optionLabel="value" optionValue="id" [appendTo]="'body'" [showClear]="false" placeholder="Seleccione el reporte..." (onChange)="resetAllFields(); changedReport(); validateForm();" [disabled]="reportService.workingOnReport"></p-dropdown>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <div class="p-field">
            <label class="bg-subtitle" id="vehicle_label">Vehículos:</label>
            <p-multiSelect [options]="vehicles" [(ngModel)]="selectedVehicles" optionLabel="name" [showToggleAll]="false" [appendTo]="'body'" placeholder="Seleccione..." (onChange)="onSelectedVehiclesChange(); validateForm();" [disabled]="reportService.workingOnReport"></p-multiSelect>
            <div style="padding: 0px 0.3rem; margin-top: 0.25rem; text-align: right;">
              <!-- <label class="png-checkbox-container d-flex align-items-center gap-1 ps-1"> -->
              <label>
                <p-checkbox [(ngModel)]="chkAllVehicles" [binary]="true" inputId="binary" (onChange)="selectAllVehicles(); validateForm();" [disabled]="!areVehiclesLoaded || reportService.workingOnReport"></p-checkbox>
                Todos los vehículos
              </label>
            </div>

          </div>
        </div>
        <div class="col-6">
          <div class="p-field">
            <p-dropdown [options]="pDropdownGroup" [(ngModel)]="checkboxGroup" [showClear]="false" optionLabel="label" optionValue="value" (onChange)="onSelectedConvoyChange(); validateForm();" [styleClass]="'bg-subtitle'" [disabled]="reportService.workingOnReport"></p-dropdown>
            <p-dropdown *ngIf="!checkboxGroup" [options]="convoys" [(ngModel)]="selectedConvoy" [showClear]="false" [appendTo]="'body'" placeholder="Seleccione convoy..." (onChange)="onSelectedConvoyChange(); validateForm();" [disabled]="reportService.workingOnReport"></p-dropdown>
            <p-dropdown *ngIf="checkboxGroup" [options]="groups" [(ngModel)]="selectedGroup" [showClear]="false" [appendTo]="'body'" placeholder="Seleccione grupo..." (onChange)="onSelectedGroupChange(); validateForm();" [disabled]="reportService.workingOnReport"></p-dropdown>
          </div>
        </div>
      </div>

      <div class="row" style="padding: 0px 0.3rem">
        <ng-container *ngIf="showOdomOpt">
          <div class="col-6">
            <label>
              <p-checkbox name="groupname" [binary]="true" [(ngModel)]="chkOdomVirtual" (onChange)="validateForm();" [disabled]="reportService.workingOnReport"></p-checkbox>
              Odómetro Virtual</label>
          </div>
        </ng-container>
        <ng-container *ngIf="showMovStop">
          <div class="col-6">
            <div class="p-field">
              <label>
                <p-checkbox [(ngModel)]="chkStops" [binary]="true" inputId="binary" (onChange)="validateForm();" [disabled]="reportService.workingOnReport"></p-checkbox>
              Paradas</label>
            </div>
          </div>
          <div class="col-6">
            <div class="p-field">
              <label>
                <p-checkbox [(ngModel)]="chkMovements" [binary]="true" inputId="binary" (onChange)="validateForm();" [disabled]="reportService.workingOnReport"></p-checkbox>
              Movimientos</label>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="showBrakeAccel">
          <div class="col-6">
            <div class="p-field">
              <label>
                <p-checkbox [(ngModel)]="chkFrenada" [binary]="true" inputId="binary" (onChange)="validateForm();" [disabled]="reportService.workingOnReport"></p-checkbox>
              Frenada</label>
            </div>
          </div>
          <div class="col-6">
            <div class="p-field">
              <label>
                <p-checkbox [(ngModel)]="chkAceleracion" [binary]="true" inputId="binary" (onChange)="validateForm();" [disabled]="reportService.workingOnReport"></p-checkbox>
              Aceleración</label>
            </div>
          </div>
        </ng-container>

        <ng-container *ngIf="showFatigaDistraccion">
          <div class="col-6">
            <div class="p-field">
              <label>
                <p-checkbox [(ngModel)]="chkFatigaSomnolencia" [binary]="true" inputId="binary" (onChange)="validateForm();" [disabled]="reportService.workingOnReport"></p-checkbox>
              Posible Fatiga</label>
            </div>
          </div>
          <div class="col-6">
            <div class="p-field">
              <label>
                <p-checkbox [(ngModel)]="chkFatigaDistraccion" [binary]="true" inputId="binary" (onChange)="validateForm();" [disabled]="reportService.workingOnReport"></p-checkbox>
              Distracción</label>
            </div>
          </div>
        </ng-container>

      </div>

      <!-- <ng-container *ngIf="showExcVelOpt">
        <div class="row">
          <div class="col-6">
            <div class="p-field">
              <p-radioButton name="exVe" value="limVel" label="Límite de Velocidad" [(ngModel)]="excesoVelocidad" (onClick)="showExcVel();"></p-radioButton>
            </div>
          </div>
          <div class="col-6">
            <div class="p-field">
              <p-radioButton name="exVe" value="durExc" label="Duración" [(ngModel)]="excesoVelocidad" (onClick)="showExcVel();"></p-radioButton>
            </div>
          </div>
        </div>
      </ng-container> -->
      <!-- <ng-container *ngIf="showOdomOpt">
        <div class="row">
          <div class="col-6">
            <div class="p-field">
              <p-radioButton name="odomV" value="0" label="Odómetro" [(ngModel)]="odometroVirtual"></p-radioButton>
            </div>
          </div>
          <div class="col-6">
            <div class="p-field">
              <p-radioButton name="odomV" value="1" label="Odómetro Virtual" [(ngModel)]="odometroVirtual"></p-radioButton>
            </div>
          </div>
        </div>
      </ng-container> -->

      <div *ngIf="showExcVelOpt">
        <div class="row">
          <div class="p-field">
            <div class="d-flex p-dropdown-full-width">
              <p-dropdown [options]="pDropdownDuration" [(ngModel)]="checkboxDuration" [showClear]="false" optionLabe="label" optionValue="value" (onChange)="onSelectedConvoyChange(); validateForm();" [styleClass]="'bg-subtitle'" [disabled]="reportService.workingOnReport"></p-dropdown>
              <!-- <button class="bg-subtitle btn-toggle-option btn-toggle-left" [ngClass]="!checkboxDuration? '': 'disabled'" (click)="checkboxDuration = false; onSelectedConvoyChange(); validateForm();">Límite de Velocidad</button>
              <button class="bg-subtitle btn-toggle-option btn-toggle-right" [ngClass]="checkboxDuration? '': 'disabled'" (click)="checkboxDuration = true; onSelectedGroupChange(); validateForm();">Duración</button> -->
            </div>
            <p-inputNumber *ngIf="!checkboxDuration" [(ngModel)]="limitSpeed" [showButtons]="true" [min]="0" [max]="300" suffix=" km/h" inputId="limiteVelocidad" [disabled]="reportService.workingOnReport"></p-inputNumber>
            <p-inputNumber *ngIf="checkboxDuration" [(ngModel)]="minimDur" [showButtons]="true" [min]="0" suffix=" seg" inputId="minimaDuracion" [disabled]="reportService.workingOnReport"></p-inputNumber>
          </div>
          <!-- <div class="col-6">
            <div class="p-field" *ngIf="excesoVelocidad == 'limVel'">
              <label class="bg-subtitle" for="limiteVelocidad">Límite de velocidad</label>
              <p-inputNumber [(ngModel)]="limitSpeed" [showButtons]="true" [min]="0" [max]="300" inputId="limiteVelocidad"></p-inputNumber>
            </div>
          </div>
          <div class="col-6">
            <div class="p-field" *ngIf="excesoVelocidad == 'durExc'">
              <label class="bg-subtitle" for="minimaDuracion">Duración</label>
              <p-inputNumber [(ngModel)]="minimDur" [showButtons]="true" [min]="0" suffix=" seg" inputId="minimaDuracion"></p-inputNumber>
            </div>
          </div> -->
        </div>
      </div>
      <div class="row" *ngIf="showLimitTime">
        <div class="col-12">
          <label class="bg-subtitle">Límite de tiempo:</label>
        </div>
        <div class="row" style="margin: 1rem 0rem 1rem 0.3rem; padding: 0px 0.3rem 0px 0px;">
          <div class="col-6">
            <div class="row">
              <div class="p-field">
                <label>Fecha inicio:
                  <p-calendar
                    [(ngModel)]="dateInit"
                    dateFormat="dd/mm/yy"
                    [maxDate]="dateEnd"
                    [appendTo]="'body'"
                    [monthNavigator]="true"
                    [yearNavigator]="true"
                    yearRange="{{strYearRange}}"
                    (onSelect)="onTimeChange(); validateForm();"
                    (onBlur)="onTimeChange(); validateForm();"
                    (onInput)="onTimeChange(); validateForm();"
                    (onClickOutside)="onTimeChange(); validateForm();"
                    [disabled]="reportService.workingOnReport"
                    ></p-calendar>
                </label>
              </div>
            </div>
            <div class="row">
              <div class="p-field">
                <label>Hora inicio:
                  <p-calendar
                    [(ngModel)]="timeInit"
                    [ngClass]="{'invalid-input': !areHoursValid}"
                    [timeOnly]="true"
                    [appendTo]="'body'"
                    (onSelect)="onTimeChange(); validateForm();"
                    (onBlur)="onTimeChange(); validateForm();"
                    (onInput)="onTimeChange(); validateForm();"
                    (onClickOutside)="onTimeChange(); validateForm();"
                    [disabled]="reportService.workingOnReport"
                    ></p-calendar>
                </label>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="row">
              <div class="p-field">
                <label>Fecha final:
                  <p-calendar
                    [(ngModel)]="dateEnd"
                    dateFormat="dd/mm/yy"
                    [minDate]="dateInit"
                    [appendTo]="'body'"
                    [monthNavigator]="true"
                    [yearNavigator]="true"
                    yearRange="{{strYearRange}}"
                    (onSelect)="onTimeChange(); validateForm();"
                    (onBlur)="onTimeChange(); validateForm();"
                    (onInput)="onTimeChange(); validateForm();"
                    (onClickOutside)="onTimeChange(); validateForm();"
                    [disabled]="reportService.workingOnReport"
                    ></p-calendar>
                </label>
              </div>
            </div>
            <div class="row">
              <div class="p-field">
                <label>Hora final:
                  <p-calendar
                    [(ngModel)]="timeEnd"
                    [ngClass]="{'invalid-input': !areHoursValid}"
                    [timeOnly]="true"
                    [appendTo]="'body'"
                    (onSelect)="onTimeChange(); validateForm();"
                    (onBlur)="onTimeChange(); validateForm();"
                    (onInput)="onTimeChange(); validateForm();"
                    (onClickOutside)="onTimeChange(); validateForm();"
                    [disabled]="reportService.workingOnReport"
                    ></p-calendar>
                </label>
              </div>
            </div>
          </div>

        </div>
        <div class="row justify-content-end fw-bold" *ngIf="!areHoursValid">
          *La hora de inicio no puede ser mayor a la hora final
        </div>
      </div>
      <div class="row" *ngIf="showZones">
        <div class="p-field">
          <label class="bg-subtitle" id="zone_label">Geocercas :</label>
          <p-multiSelect [options]="zones" [(ngModel)]="selectedZones" optionLabel="zone_name" optionValue="id" [showToggleAll]="false" [appendTo]="'body'" placeholder="Seleccione la(s) geocerca(s)" (onChange)="onSelectedGeofenceschange(); validateForm();" [disabled]="reportService.workingOnReport"></p-multiSelect>
          <div style="padding: 0px 0.3rem; margin-top: 0.25rem; text-align: right;">
            <label>
              <p-checkbox [(ngModel)]="chkAllZones" [binary]="true" inputId="binary" (onChange)="selectAllZones(); validateForm();" [disabled]="!areZonesLoaded || reportService.workingOnReport"></p-checkbox>
              Todos
            </label>
          </div>
        </div>
      </div>


      <div class="row two-column-checkbox-container" *ngIf="showCheckboxs">

        <div class="col-12">
          <label class="bg-subtitle">Seleccione las opciones a incluir en el reporte:</label>
        </div>

        <div class="col-12 d-flex flex-column gap-2 py-3" style="padding: 0rem 1.25rem;">

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.fServidor" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                Fecha Servidor</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.alcoholemia" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                Alcoholemia</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.ubicacion" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Ubicación</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.parametros" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                Parámetros</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.velGPS" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Velocidad GPS</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.cNivel" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Nivel de Combustible</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.velECO" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Velocidad ECO</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.cRestante" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  C.Restante</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.velGPS_speed" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Velocidad GPS_speed</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.cMotor" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Consumo de Motor</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.altitud" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Altitud</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.odometro" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Odómetro</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.angulo" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Angulo</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.onOff" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  On / Off</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.RPMAlta" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  RPM Alta</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.RxM" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Rev. X Min.</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.referencia" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Referencia</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.recFacial" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Reconocimiento Facial</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <!-- <label>
                  <p-checkbox [(ngModel)]="oG.referencia" [binary]="true" inputId="binary"></p-checkbox>
                  Referencia</label> -->
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.velCAN" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Velocidad CAN</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <!-- <label>
                  <p-checkbox [(ngModel)]="oG.referencia" [binary]="true" inputId="binary"></p-checkbox>
                  Referencia</label>-->
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.pCercano" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Punto Cercano</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <!-- <label>
                  <p-checkbox [(ngModel)]="oG.referencia" [binary]="true" inputId="binary"></p-checkbox>
                  Referencia</label>-->
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="oG.DUOT2state" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport"></p-checkbox>
                  DUOT2 state</label>
              </div>
            </div>
          </div>

        </div>

      </div>

      <div class="row two-column-checkbox-container" *ngIf="showEvents">
        <div class="col-12">
          <label class="bg-subtitle">Seleccione los eventos a incluir en el reporte:</label>
        </div>

        <div class="col-12 d-flex flex-column gap-2 py-3" style="padding: 0rem 1.25rem;">

          <div class="row">
            <div class="col-12">
              <label class="bg-subtitle bg-subtitle-light">Eventos GPS</label>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.GPSbateriaDesconectada" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                Bateria desconectada</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.GPSaceleracionBrusca" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                Aceleracion brusca</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.GPSfrenadaBrusca" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                Frenada brusca</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.GPSsos" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                SOS</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.GPSmotorEncendido" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                Motor encendido</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.GPSmotorApagado" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                Motor apagado</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <label class="bg-subtitle bg-subtitle-light mt-2">Eventos Plataforma</label>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evEntrada" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Zona de Entrada</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evSalida" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Zona de Salida</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evEstadia" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Tiempo de estadia en zona</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evParada" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Parada en zona no autorizada</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evExcesoDeVelocidad" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Exceso de Velocidad</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evInfraccion" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Infracción</label>
              </div>
            </div>
          </div>




          <div class="row">
            <div class="col-12">
              <label class="bg-subtitle bg-subtitle-light mt-2">Eventos Seguridad Vehicular</label>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evNoRostro" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  No Rostro</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evFatigaExtrema" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Fatiga Extrema</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.AccFatiga" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Posible Fatiga</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.AccDistraccion" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Distracción</label>
              </div>
            </div>
          </div>

          <div class="row">
            <!-- <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.AccAlcoholemia" [binary]="true" inputId="binary"></p-checkbox>
                  Alcoholemia</label>
              </div>
            </div> -->
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evAnticolisionFrontal" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Anticolisión frontal</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evColisionConPeatones" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Colisión con Peatones</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evDesvioCarrilIzquierda" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Desvío de carril hacia la izquierda</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evDesvioCarrilDerecha" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Desvío de carril hacia la derecha</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.evBloqueoVisionMobileye" [binary]="true" inputId="binary" (onChange)="onChangeChkEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Bloqueo de visión del Mobileye</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <label class="bg-subtitle bg-subtitle-light mt-2">Otros</label>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.OtroTodos" [binary]="true" inputId="binary" (onChange)="onChkAllEvents()" [disabled]="reportService.workingOnReport"></p-checkbox>
                  Todos</label>
              </div>
            </div>
            <div class="col-6">
              <div class="p-field">
              </div>
            </div>
            <!-- <div class="col-6">
              <div class="p-field">
                <label>
                  <p-checkbox [(ngModel)]="eV.OtroExVelocidad" [binary]="true" inputId="binary"></p-checkbox>
                  Exceso de Velocidad</label>
              </div>
            </div> -->
          </div>

        </div>

      </div>

      <div class="row" *ngIf="showChkSimultaneousTables">
        <div class="p-field col-12 d-flex" style="padding: 0rem 1.25rem;">
          <label class="pe-2">
            <p-checkbox [(ngModel)]="chkSimultaneousTables" [binary]="true" inputId="binary" [disabled]="!isEverythingLoaded || reportService.workingOnReport" (onChange)="logDropState()"></p-checkbox>
            Mostrar tablas en simultáneo</label>
          <span class="flex-none center-icon neutral-icon-color">
            <i class="fa fa-question-circle fa-lg" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="auto" title="Se recomienda desactivar esta opción si se han seleccionado 20 o más vehículos."></i>
          </span>
        </div>
      </div>

    </div>

  <ng-template pTemplate="footer">
    <button [disabled]="!isFormFilled || reportService.workingOnReport" (click)="confirm()" class="btn-gl-save btn-dark-hover" style="width: 10rem; border: none;">Generar Reporte</button>
    <!-- <label>
      <p-checkbox [(ngModel)]="!chkTableDropdown" [binary]="true" inputId="binary" [disabled]="reportService.workingOnReport" (onChange)="logDropState()"></p-checkbox>
      Mostrar tablas en simultáneo</label> -->
  </ng-template>
</p-card>
