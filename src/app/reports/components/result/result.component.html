<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" name="reportSpinner" size = "medium" color = "#fff" type = "ball-rotate" [fullScreen] = "false"><p style="color: white" > Generando Reporte... </p></ngx-spinner>
<p-confirmDialog #cdExport [style]="{width: '400'}" key="showSelectExcelConfirmation">
  <ng-template pTemplate="header">
      <h4>Elija un formato para exportar</h4>
  </ng-template>
  <ng-template pTemplate="footer">
      <button type="button" pButton label="UNIDO" (click)="cdExport.reject()"></button>
      <button type="button" pButton label="SEPARADO" (click)="cdExport.accept()"></button>
  </ng-template>
</p-confirmDialog>

<div style="display: flex; flex-direction: column; padding: 0; height: 100%; max-height: 100%; margin: 0; font-size: 0.8rem;">
  <div *ngIf="dt_completed == 0" class="pristine-report">
    <img src="./assets/images/fondo-svg-reporte.svg" alt="fondo-reporte-logo">
  </div>
  <div [ngClass]="table_hide" class="container grand-container">
    <div *ngIf="num_rep >= 0 && num_rep <= 20 " class="table-title" style="margin-bottom: 0.25rem;">{{rep_title}}</div>
    <div class="table-subtitle" style="margin-bottom: 0.25rem;">{{ rep_subtitle }}</div>
  </div>
  <ng-container>

    <!-- 0. REPORTE DE PARADAS Y MOVIMIENTOS -->

    <div class="container grand-container multitable-container" *ngIf="num_rep == 0">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 0.8rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                <th>Ítem</th>
                <th>Estado</th>
                <th *ngIf="!chkDateHour">Inicio</th>
                <th *ngIf="chkDateHour">Fecha de Inicio</th>
                <th *ngIf="chkDateHour">Hora de Inicio</th>
                <th *ngIf="!chkDateHour">Fin</th>
                <th *ngIf="chkDateHour">Fecha de Fin</th>
                <th *ngIf="chkDateHour">Hora de Fin</th>
                <th>Duración</th>
                <th *ngIf="v_table[2].Paradas">Posición detenida</th>
                <th *ngIf="v_table[2].Movimientos">Recorrido</th>
                <th *ngIf="v_table[2].Movimientos">Velocidad Máxima</th>
                <th *ngIf="v_table[2].Paradas">Punto cercano</th>
                <th *ngIf="v_table[2].Movimientos">Velocidad Promedio</th>
                <th *ngIf="v_table[2].Paradas">Referencia</th>
              </tr>
            </thead>

            <!-- PARADAS Y MOVIMIENTOS -->
            <tbody *ngIf="v_table[2].Paradas && v_table[2].Movimientos">
              <tr *ngFor="let row of v_table[1];  let i = index;">
                <td>{{i+1}}</td>
                <td>{{row.estado}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                <td *ngIf="!chkDateHour">{{row.fechasig}}</td>
                <td *ngIf="chkDateHour">{{row.fechasig.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fechasig.split(' ')[1]}}</td>
                <td>{{row.duracion}}</td>
                <td *ngIf="row.esInt == 0">
                  <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                </td><td *ngIf="row.esInt == 1">---</td>
                <td *ngIf="row.esInt == 0">---</td><td *ngIf="row.esInt == 1">{{row.recorrido}}</td>
                <td *ngIf="row.esInt == 0">---</td><td *ngIf="row.esInt == 1">{{row.maxima_velocidad}}</td>
                <td *ngIf="row.esInt == 0">{{row.pCercano}}</td><td *ngIf="row.esInt == 1">---</td>
                <td *ngIf="row.esInt == 0">---</td><td *ngIf="row.esInt == 1">{{row.vel_promedio}}</td>
                <td *ngIf="row.esInt == 0">{{row.referencia}}</td><td *ngIf="row.esInt == 1">---</td>
              </tr>
            </tbody>

            <!-- SOLO MOVIMIENTOS -->
            <tbody *ngIf="!v_table[2].Paradas && v_table[2].Movimientos">
              <tr *ngFor="let row of filterMovimientos(v_table[1]);  let i = index;">
                <td>{{i+1}}</td>
                <td>{{row.estado}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                <td *ngIf="!chkDateHour">{{row.fechasig}}</td>
                <td *ngIf="chkDateHour">{{row.fechasig.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fechasig.split(' ')[1]}}</td>
                <td>{{row.duracion}}</td>
                <td>{{row.recorrido}}</td>
                <td>{{row.maxima_velocidad}}</td>
                <td>{{row.vel_promedio}}</td>
              </tr>
            </tbody>

            <!-- SOLO PARADAS -->
            <tbody *ngIf="v_table[2].Paradas && !v_table[2].Movimientos">
              <tr *ngFor="let row of filterParadas(v_table[1]);  let i = index;">
                <td>{{i+1}}</td>
                <td>{{row.estado}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                <td *ngIf="!chkDateHour">{{row.fechasig}}</td>
                <td *ngIf="chkDateHour">{{row.fechasig.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fechasig.split(' ')[1]}}</td>
                <td>{{row.duracion}}</td>
                <td>
                  <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                </td>
                <td>{{row.pCercano}}</td>
                <td>{{row.referencia}}</td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>

        <div *ngIf="v_table[1].length != 0" class="p-card text-left" style="padding: 1rem;">
          <h6>RESUMEN DE TOTALES</h6>
          <p>Longitud de ruta       : <span>{{v_table[3][0]}}</span></p>
          <p>Duración de movimiento : <span>{{v_table[3][1]}}</span></p>
          <p>Duración de detenido   : <span>{{v_table[3][2]}}</span></p>
          <p>Velocidad más alta     : <span>{{v_table[3][3]}}</span></p>
          <p>Velocidad promedio     : <span>{{v_table[3][4]}}</span></p>
          <!-- <p ng-if="res.optionUser() == 445">Horas Trabajadas en el Periodo : <span>{{v_table[3][5]}}</span></p>
          <p ng-if="res.optionUser() == 445">Total de Horas Trabajadas : <span>{{v_table[3][6]}}</span></p>

          <p ng-if="res.optionUser() == 394">Total de combustible consumido: <span>{{v_table[3][7]}}</span></p>
          <p ng-if="res.optionUser() == 394">Total de distancia recorrida(CAN): <span>{{v_table[3][8]}}</span></p>
          <p ng-if="res.optionUser() == 394">Rendimiento por galón: <span>{{v_table[3][9]}}</span></p> -->

        </div>

      </div>
    </div>

    <!-- 1. REPORTE DE EXCESO DE VELOCIDAD -->

    <div class="container grand-container multitable-container" *ngIf="num_rep == 1">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 0.8rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered && !chkDuracion">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                <th>Ítem</th>
                <th>Nombre</th>
                <th *ngIf="!chkDateHour">Fecha y Hora</th>
                <th *ngIf="chkDateHour">Fecha</th>
                <th *ngIf="chkDateHour">Hora</th>
                <th>Máxima Velocidad</th>
                <th>Ubicación</th>
                <th>Punto Cercano</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">
                <td>{{i+1}}</td>
                <td>{{row.nombre}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                <td>{{row.maxima_velocidad}}</td>
                <td>
                  <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                </td>
                <td>{{row.PC}}</td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <ng-container *ngIf="dtRendered && chkDuracion">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                <th>Ítem</th>
                <th *ngIf="!chkDateHour">Inicio</th>
                <th *ngIf="chkDateHour">Fecha de Inicio</th>
                <th *ngIf="chkDateHour">Hora de Inicio</th>
                <th *ngIf="!chkDateHour">Fin</th>
                <th *ngIf="chkDateHour">Fecha de Fin</th>
                <th *ngIf="chkDateHour">Hora de Fin</th>
                <th>Duración</th>
                <th>Cant. de Tramas</th>
                <th>Tramas</th>
                <th>Vel. Min.</th>
                <th>Vel. Máx.</th>
                <th>Punto Cercano</th>
                <th>Zona Cercana</th>
                <th>Ubicación</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">
                <td>{{i+1}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha_inicial}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_inicial.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_inicial.split(' ')[1]}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha_final}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_final.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_final.split(' ')[1]}}</td>
                <td>{{row.duracion}}</td>
                <td>{{row.cant_tramas}}</td>
                <td>{{row.string_tramas}}</td>
                <td>{{row.vel_min}}</td>
                <td>{{row.vel_max}}</td>
                <td>{{row.PC}}</td>
                <td>{{row.ZC}}</td>
                <td>
                  <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                </td>
              </tr>
            </tbody>

          </table>
        </ng-container>

      </div>
    </div>

    <!-- 2. REPORTE DE ENTRADA Y SALIDA -->

    <div class="container grand-container multitable-container" *ngIf="num_rep == 2">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 0.8rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                <th>Ítem</th>
                <th>Fecha de Entrada</th>
                <th *ngIf="chkDateHour">Hora de Entrada</th>
                <th>Fecha de Salida</th>
                <th *ngIf="chkDateHour">Hora de Salida</th>
                <th>Duración</th>
                <th>Nombre de Zona</th>
                <th>Posición de Zona</th>
                <th>Punto Cercano</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">
                <td>{{i+1}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha_out}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_out.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_out.split(' ')[1]}}</td>
                <td>{{row.duracion}}</td>
                <td>{{row.nombre_zona}}</td>
                <td>
                  <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                </td>
                <td>{{row.PC}}</td>
              </tr>
            </tbody>
          </table>
        </ng-container>

      </div>
    </div>

    <!-- 3. REPORTE DE COMBUSTIBLE -->

    <div class="container grand-container multitable-container" *ngIf="num_rep == 3">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 0.8rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                <th>Ítem</th>
                <th *ngIf="!chkDateHour">Fecha/Hora</th>
                <th *ngIf="chkDateHour">Fecha</th>
                <th *ngIf="chkDateHour">Hora</th>
                <th>Vel. CAN (km/h)</th>
                <th>Nivel de Combustible (%)</th>
                <th>Consumo de Combustible (litros)</th>
                <th>Consumo HRFC (litros)</th>
                <th>Combustible Restante (galones)</th>
                <th>Contacto de Motor</th>
                <th *ngIf="!chkOdomV">Odómetro</th>
                <th *ngIf="chkOdomV">Odómetro Virtual</th>
                <th>Ubicación</th>
                <th>Mensaje de Alerta</th>
                <th>Combustible Alerta (galones)</th>
                <th>can_rpm</th>
                <th>Altitud</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">
                <td>{{i+1}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                <td>{{row.can_speed}}</td>
                <td *ngIf="isNumber(row.fuel_level)">{{row.fuel_level.toFixed(2)}}</td>
                <td *ngIf="!isNumber(row.fuel_level)">{{row.fuel_level}}</td>
                <td>{{row.fuel_used}}</td>
                <td>{{row.can_HRFC}}</td>
                <td>{{row.combusrestante}}</td>
                <td *ngIf="row.di4 == 1">Abierto</td>
			    			<td *ngIf="row.di4 != 1 && row.di4 != 0">-</td>
			    			<td *ngIf="row.di4 == 0">Cerrado</td>
                <td *ngIf="isNumber(row.can_dist)">{{row.can_dist.toFixed(2)}}</td>
                <td *ngIf="!isNumber(row.can_dist)">{{row.can_dist}}</td>
                <td>
                  <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                </td>
                <td>{{row.alerta}}</td>
                <td>{{row.combustiblealerta}}</td>
                <td>{{row.can_rpm}}</td>
                <td>{{row.altitude}}</td>
              </tr>
            </tbody>
          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>

        <div *ngIf="v_table[1].length != 0" class="p-card text-left" style="padding: 1rem;">
          <h6>RESUMEN DE TOTALES</h6>
          <p>Total de distancia recorrida           : <span>{{v_table[2][0]}}</span></p>
          <p>Total de combustible consumido         : <span>{{v_table[2][1]}}</span></p>
          <p>Total de combustible HRFC consumido    : <span>{{v_table[2][2]}}</span></p>
          <p>Rendimiento por galón                  : <span>{{v_table[2][3]}}</span></p>
        </div>

      </div>
    </div>



    <!-- 6. REPORTE DE EVENTOS-->
    <div class="container grand-container" *ngIf="num_rep == 6">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                <th>Ítem</th>
                <th>Unidad</th>
                <th>Evento</th>
                <th *ngIf="!chkDateHour">Fecha/Hora</th>
                <th *ngIf="chkDateHour">Fecha</th>
                <th *ngIf="chkDateHour">Hora</th>
                <th>Velocidad GPS</th>
                <th>Velocidad CAN</th>
                <th>Geocerca</th>
                <th>Ubicación</th>
                <th>Referencia</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                <td>{{i + 1}}</td>
                <td>{{row.nombre_objeto}}</td>
                <td>{{row.descripcion_evento}}</td>

                <td *ngIf="!chkDateHour">{{row.fecha_tracker}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_tracker.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_tracker.split(' ')[1]}}</td>

                <td>{{row.velocidad}}</td>
                <td>{{row.vel_can}}</td>
                <td>{{row.nombre_zona}}</td>
                <td>
                  <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                </td>
                <td>{{row.referencia}}</td>

              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>

      </div>
    </div>




    <!-- 7. REPORTE DE POSICIÓN -->

    <div class="container p-card singletable-container" *ngIf="num_rep == 7">
      <table *ngIf="dtRendered" [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
        <thead>
          <tr>
            <th>Index</th>
            <th>Código</th>
            <th>Placa</th>
            <th *ngIf="!chkDateHour">Fecha/Hora</th>
            <th *ngIf="chkDateHour">Fecha</th>
            <th *ngIf="chkDateHour">Hora</th>
            <th>Status</th>
            <th>Velocidad GPS</th>
            <th>Velocidad CAN</th>
            <th>Odómetro</th>
            <th>Ubicación</th>
            <th>Referencia</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of data;  let i = index;">
            <td>{{i+1}}</td>
            <td>{{row.codigo}}</td>
            <td>{{row.placa}}</td>
            <td *ngIf="!chkDateHour">{{row.fecha}}</td>
            <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
            <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
            <td>{{row['estado']}}</td>
            <td>{{(row.velocidad != '-')? row.velocidad + ' km/h': '-'}}</td>
            <td>{{(row.velocidad_can != '-')? row.velocidad_can + ' km/h': '-'}}</td>
            <td>{{row.odometro}}</td>
            <td>
              <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}}, {{row.longitud.toFixed(6)}}</a>
            </td>
            <td>{{row.zonaCercana}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- 10. REPORTE DE FRENADA Y ACELERACION BRUSCA -->

    <div class="container grand-container multitable-container" *ngIf="num_rep == 10">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 0.8rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                <th>Ítem</th>
                <th *ngIf="!chkDateHour">Fecha / Hora</th>
                <th *ngIf="chkDateHour">Fecha</th>
                <th *ngIf="chkDateHour">Hora</th>
                <th>Tipo Unidad</th>
                <th>ID Conductor</th>
                <th>Conductor</th>
                <th>Vel. GPS</th>
                <th>Vel. CAN</th>
                <th>Descripción</th>
                <th>Tramo</th>
                <th>Punto Cercano</th>
                <th>Ubicación</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">
                <td>{{i+1}}</td>
                <td *ngIf="!chkDateHour">{{row.fecha_final}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_final.split(' ')[0]}}</td>
                <td *ngIf="chkDateHour">{{row.fecha_final.split(' ')[1]}}</td>
                <td>{{row.tipo_unidad}}</td>
                <td>{{row.id_conductor}}</td>
                <td>{{row.nombre_conductor}}</td>
                <td>{{row.vel_final}}</td>
                <td>{{row.vel_can}}</td>
                <td>{{row.tipo_frenada}}</td>
                <td>{{row.tramo}}</td>
                <td>{{row.PC}}</td>
                <td>
                  <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                </td>
              </tr>
            </tbody>
          </table>
        </ng-container>

      </div>
    </div>
    <!-- 11. REPORTE DE DISTRACCIÓN Y POSIBLE FATIGA-->
    <div class="container grand-container" *ngIf="num_rep == 11">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>
                  <th>Código</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>

                  <th>Id Conductor</th>
                  <th>Conductor</th>
                  <th>Vel.GPS</th>
                  <th>Vel.CAN</th>
                  <th>Descripción</th>
                  <th>Reconocimiento Facial (ai1x)</th>

                  <th>Tramo</th>
                  <th>Punto Cercano</th>
                  <th>Ubicación</th>

              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

                  <td>{{row.idConductor}}</td>
                  <td>{{row.conductor}}</td>
                  <td>{{row.velGPS}} Km/h</td>
                  <td>{{row.vel_can}} Km/h</td>
                  <td>{{row.descripcion}}</td>

                  <td *ngIf="(row.ai1x > 1000)">Rostro detectado ({{row.ai1x}})</td>
                  <td *ngIf="(row.ai1x < 1001)">Rostro ausente ({{row.ai1x}})</td>

                  <td>{{row.tramo}}</td>
                  <td>{{row.PC}}</td>
                  <td>
                    <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                  </td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>


      </div>
    </div>


    <!-- 12. REPORTE DE CALIFICACION DE MANEJO-->
    <div class="container grand-container" *ngIf="num_rep == 12">
      <div *ngFor="let v_table of data;  let ii = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>

                  <th *ngIf="!chkDateHour">Fecha/Hora Fin</th>
                  <th *ngIf="chkDateHour">Fecha Fin</th>
                  <th *ngIf="chkDateHour">Hora Fin</th>

                  <th>Codigo</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>

                  <th>C01</th>
                  <th>C02</th>
                  <th>C03</th>
                  <th>C04</th>
                  <th>C05</th>
                  <th>C06</th>
                  <th>C07</th>
                  <th>C08</th>
                  <th>C09</th>
                  <th>C10</th>
                  <th>C11</th>
                  <!-- <th>C12</th> -->
                  <th>Calificación</th>

              </tr>
            </thead>



            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>

                  <td *ngIf="!chkDateHour">{{row.fecha_fin}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha_fin.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha_fin.split(' ')[1]}}</td>

                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C01" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;">
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C02" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C03" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C04" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C05" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C06" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C07" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C08" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C09" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C10" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>
                    <input *ngIf="true" [(ngModel)]="row.C11" (change)="puntuacion(ii);" type="number" style="width: 50px; border: none; padding: 2px 0 2px 4px;" >
                  </td>

                  <td>{{row.puntuacion}}</td>

              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>


      </div>


      <div class="p-card" style="padding: 1rem;">

        <h6>RESUMEN</h6>
        <!-- <p><span>C01 = cantidad de frenadas extremadamente bruscas.</span></p> -->
        <p><span>C01 = cantidad de frenadas bruscas.</span></p>
        <p><span>C02 = cantidad de aceleraciones bruscas.</span></p>
        <p><span>C03 = cantidad de RPM altas. (mayores a 2,000 para sprintes y buses mayores a 2,300).</span></p>
        <p><span>C04 = cantidad de posible fatiga.</span></p>
        <p><span>C05 = cantidad de fatiga extrema.</span></p>
        <p><span>C06 = cantidad de distracciones.</span></p>
        <p><span>C07 = cantidad de colisión frontal.</span></p>
        <p><span>C08 = cantidad de colisión con peatones.</span></p>
        <p><span>C09 = cantidad de desvio de carril a la izquierda.</span></p>
        <p><span>C10 = cantidad de desvio de carril a la derecha.</span></p>
        <p><span>C11 = cantidad de exceso de velocidad muy grave.</span></p>

      </div>

    </div>




    <!-- 13. REPORTE DE FATIGA EXTREMA-->
    <div class="container grand-container" *ngIf="num_rep == 13">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>
                  <th>Código</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>

                  <th>Id Conductor</th>
                  <th>Conductor</th>
                  <th>Vel.GPS</th>
                  <th>Vel.CAN</th>

                  <th>Reconocimiento Facial (ai1x)</th>
                  <th>Tramo</th>
                  <th>Punto Cercano</th>
                  <th>Ubicación</th>

              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

                  <td>{{row.idConductor}}</td>
                  <td>{{row.conductor}}</td>
                  <td>{{row.velGPS}} Km/h</td>
                  <td>{{row.vel_can}} Km/h</td>

                  <td *ngIf="(row.ai1x > 1000)">Rostro detectado ({{row.ai1x}})</td>
                  <td *ngIf="(row.ai1x < 1001)">Rostro ausente ({{row.ai1x}})</td>

                  <td>{{row.tramo}}</td>
                  <td>{{row.PC}}</td>
                  <td>
                    <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                  </td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>

      </div>
    </div>

    <!-- 14. REPORTE DE ANTICOLISION FRONTAL-->
    <div class="container grand-container" *ngIf="num_rep == 14">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>
                  <th>Código</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>

                  <th>Id Conductor</th>
                  <th>Conductor</th>
                  <th>Vel.GPS</th>
                  <th>Vel.CAN</th>

                  <th>Tramo</th>
                  <th>Punto Cercano</th>
                  <th>Ubicación</th>

              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

                  <td>{{row.idConductor}}</td>
                  <td>{{row.conductor}}</td>
                  <td>{{row.vel_gps_speed}} Km/h</td>
                  <td>{{row.vel_can}} Km/h</td>

                  <td>{{row.tramo}}</td>
                  <td>{{row.PC}}</td>
                  <td>
                    <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                  </td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>


      </div>
    </div>


    <!-- 15. REPORTE DE COLISIÓN CON PEATONES-->
    <div class="container grand-container" *ngIf="num_rep == 15">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>
                  <th>Código</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>

                  <th>Id Conductor</th>
                  <th>Conductor</th>
                  <th>Vel.GPS</th>
                  <th>Vel.CAN</th>

                  <th>Tramo</th>
                  <th>Punto Cercano</th>
                  <th>Ubicación</th>

              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

                  <td>{{row.idConductor}}</td>
                  <td>{{row.conductor}}</td>
                  <td>{{row.vel_gps_speed}} Km/h</td>
                  <td>{{row.vel_can}} Km/h</td>

                  <td>{{row.tramo}}</td>
                  <td>{{row.PC}}</td>
                  <td>
                    <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                  </td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>


      </div>
    </div>

    <!-- 16. REPORTE DE DESVÍO DE CARRIL HACIA LA IZQUIERDA-->
    <div class="container grand-container" *ngIf="num_rep == 16">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>
                  <th>Código</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>

                  <th>Id Conductor</th>
                  <th>Conductor</th>
                  <th>Vel.GPS</th>
                  <th>Vel.CAN</th>

                  <th>Tramo</th>
                  <th>Punto Cercano</th>
                  <th>Ubicación</th>

              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

                  <td>{{row.idConductor}}</td>
                  <td>{{row.conductor}}</td>
                  <td>{{row.vel_gps_speed}} Km/h</td>
                  <td>{{row.vel_can}} Km/h</td>

                  <td>{{row.tramo}}</td>
                  <td>{{row.PC}}</td>
                  <td>
                    <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                  </td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>


      </div>
    </div>


    <!-- 17.REPORTE DE DESVÍO DE CARRIL HACIA LA DERECHA-->
    <div class="container grand-container" *ngIf="num_rep == 17">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>
                  <th>Código</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>

                  <th>Id Conductor</th>
                  <th>Conductor</th>
                  <th>Vel.GPS</th>
                  <th>Vel.CAN</th>

                  <th>Tramo</th>
                  <th>Punto Cercano</th>
                  <th>Ubicación</th>

              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

                  <td>{{row.idConductor}}</td>
                  <td>{{row.conductor}}</td>
                  <td>{{row.vel_gps_speed}} Km/h</td>
                  <td>{{row.vel_can}} Km/h</td>

                  <td>{{row.tramo}}</td>
                  <td>{{row.PC}}</td>
                  <td>
                    <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                  </td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>


      </div>
    </div>

    <!-- 18. REPORTE DE BLOQUEO DE VISIÓN DEL MOBILEYE-->
    <div class="container grand-container" *ngIf="num_rep == 18">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>
                  <th>Código</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>

                  <th>Id Conductor</th>
                  <th>Conductor</th>
                  <th>Vel.GPS</th>
                  <th>Vel.CAN</th>

                  <th>Tramo</th>
                  <th>Punto Cercano</th>
                  <th>Ubicación</th>

              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

                  <td>{{row.idConductor}}</td>
                  <td>{{row.conductor}}</td>
                  <td>{{row.vel_gps_speed}} Km/h</td>
                  <td>{{row.vel_can}} Km/h</td>

                  <td>{{row.tramo}}</td>
                  <td>{{row.PC}}</td>
                  <td>
                    <a href="http://maps.google.com/maps?q={{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}&amp;t=m" target="_blank">{{row.latitud.toFixed(6)}},{{row.longitud.toFixed(6)}}</a>
                  </td>
              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>


      </div>
    </div>

    <!-- 19. REPORTE DE BLOQUEO DE VISIÓN DEL MOBILEYE-->
    <div class="container grand-container" *ngIf="num_rep == 19">
      <div *ngFor="let v_table of data;  let i = index;" class="p-card" style="padding: 1rem;" [hidden]="true">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">
          <div>VEHÍCULO: {{v_table[0][1]}}</div>
          <div>PERIODO: {{period}}</div>
        </div>

        <ng-container *ngIf="dtRendered">
          <table [ngClass]="table_hide" dt-instance="dtInstance" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-border row-border hover">
            <thead>
              <tr>
                  <th>Item</th>
                  <th *ngIf="!chkDateHour">Fecha/Hora</th>
                  <th *ngIf="chkDateHour">Fecha</th>
                  <th *ngIf="chkDateHour">Hora</th>
                  <th>Código</th>
                  <th>Placa</th>
                  <th>Tipo de Unidad</th>



              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let row of v_table[1];  let i = index;">

                  <td>{{i + 1}}</td>
                  <td *ngIf="!chkDateHour">{{row.fecha}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[0]}}</td>
                  <td *ngIf="chkDateHour">{{row.fecha.split(' ')[1]}}</td>
                  <td>{{row.codigo}}</td>
                  <td>{{row.placa}}</td>
                  <td>{{row.tipo_unidad}}</td>

              </tr>
            </tbody>

          </table>
        </ng-container>

        <div *ngIf="v_table[1].length == 0" class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>

      </div>

      <div class="p-card" style="padding: 1rem;" >

          <ng-container *ngIf="dtRendered">

              <!-- <button class="btn btn-success" (click)="runReportGerencial(1);">Ejecutar la creacion de graficos</button> -->

              <ng-container>
                <div class="row justify-content-md-center">
                  <div class="col-md-auto">
                    <button class="btn btn-success" (click)="exportPdfReporteGerencial();">EXPORTAR PDF</button>
                  </div>
                </div>
              </ng-container>

              <div  class="p-card" style="padding: 1rem;">

                <div class="container">
                  <div class="row justify-content-md-center">
                    <div class="col-md-auto">
                      <div class="h4">RESUMEN DE EVENTOS</div>
                    </div>
                  </div>
                </div>




                    <table class="table table-sm" width="100%">
                      <thead class="table-light">
                        <tr>
                          <td>EVENTO</td>
                          <td>Nº DE EVENTOS</td>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>DISTRACCIÓN</td>
                          <td>{{arrDataTabla.distraccion}}</td>
                        </tr>
                        <tr>
                          <td>POSIBLE FATIGA</td>
                          <td>{{arrDataTabla.posible_fatiga}}</td>
                        </tr>
                        <tr>
                          <td>FATIGA EXTREMA</td>
                          <td>{{arrDataTabla.fatiga_extrema}}</td>
                        </tr>

                      </tbody>

                    </table>

              </div>

              <br>

              <div  class="p-card" style="padding: 1rem;">
                <div class="container" >

                      <div class="row justify-content-md-center">
                        <div class="col-md-auto">
                          <div class="h4">DISTRACCION</div>
                        </div>
                      </div>

                      <div class="h5">Eventos Por Unidad</div>
                      <div [hidden]="!arrDataGrafico[0]" >
                        <div class="demo-container"  >
                          <div id="placeholder_x_unidad_distraccion" class="demo-placeholder"></div>
                        </div>
                      </div>

                      <div class="h5">Eventos Por Fecha</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[1]">
                        <div id="placeholder_x_fecha_distraccion" class="demo-placeholder"></div>
                      </div>

                      <div class="h5">Eventos Por Geocerca</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[2]" >
                        <div id="placeholder_x_geocerca_distraccion" class="demo-placeholder"></div>
                      </div>

                      <div class="h5">Eventos Por Conductor</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[3]" >
                        <div id="placeholder_x_conductor_distraccion" class="demo-placeholder"></div>
                      </div>

                </div>
              </div>
              <br>
              <div  class="p-card" style="padding: 1rem;">
                <div class="container" >

                      <div class="row justify-content-md-center">
                        <div class="col-md-auto">
                          <div class="h4">POSIBLE FATIGA</div>
                        </div>
                      </div>

                      <div class="h5">Eventos Por Unidad</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[4]">
                        <div id="placeholder_x_unidad_posible_fatiga" class="demo-placeholder"></div>
                      </div>

                      <div class="h5">Eventos Por Fecha</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[5]">
                        <div id="placeholder_x_fecha_posible_fatiga" class="demo-placeholder"></div>
                      </div>

                      <div class="h5">Eventos Por Geocerca</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[6]">
                        <div id="placeholder_x_geocerca_posible_fatiga" class="demo-placeholder"></div>
                      </div>

                      <div class="h5">Eventos Por Conductor</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[7]">
                        <div id="placeholder_x_conductor_posible_fatiga" class="demo-placeholder"></div>
                      </div>

                 </div>
              </div>

              <br>

              <div  class="p-card" style="padding: 1rem;">
                <div class="container" >

                      <div class="row justify-content-md-center">
                        <div class="col-md-auto">
                          <div class="h4">FATIGA EXTREMA</div>
                        </div>
                      </div>

                      <div class="h5">Eventos Por Unidad</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[8]">
                        <div id="placeholder_x_unidad_fatiga_extrema" class="demo-placeholder"></div>
                      </div>

                      <div class="h5">Eventos Por Fecha</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[9]">
                        <div id="placeholder_x_fecha_fatiga_extrema" class="demo-placeholder"></div>
                      </div>

                      <div class="h5">Eventos Por Geocerca</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[10]">
                        <div id="placeholder_x_geocerca_fatiga_extrema" class="demo-placeholder"></div>
                      </div>

                      <div class="h5">Eventos Por Conductor</div>
                      <div class="demo-container" [hidden]="!arrDataGrafico[11]">
                        <div id="placeholder_x_conductor_fatiga_extrema" class="demo-placeholder"></div>
                      </div>

                 </div>
              </div>



          </ng-container>
      </div>


    </div>


    <!-- 19. REPORTE GERENCIAL (Cuenta cruzdelsur)-->
    <div class="container grand-container" *ngIf="num_rep == 21">
      <div  class="p-card" style="padding: 1rem;">

        <div class="subtable-title" style="margin-bottom: 0.25rem;">

        </div>

        <ng-container>

          <!-- <button class="btn btn-success" (click)="runReportGerencial(1);">Ejecutar la creacion de graficos</button> -->

          <button class="btn btn-success" (click)="exportPdfReporteGerencial();">EXPORTAR EXCEL</button>

        </ng-container>

        <div class="p-card text-left" style="padding: 1rem;">
          <p>Ningún dato encontrado en su consulta.</p>
        </div>


      </div>
    </div>




    <div *ngIf="dtRendered" class="export-container">
      <button *ngIf="num_rep == 0" class="btn btn-success" (click)="showSelectExcel('exportExcelParadasMovimientos');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 1" class="btn btn-success" (click)="showSelectExcel('exportExcelExcesosVelocidad');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 2" class="btn btn-success" (click)="showSelectExcel('exportExcelEntradaSalida');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 3" class="btn btn-success" (click)="showSelectExcel('exportExcelCombustible');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 6" class="btn btn-success" (click)="showSelectExcel('exportExcelEventos');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 7" class="btn btn-success" (click)="exportExcelPosicion(1);">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 10" class="btn btn-success" (click)="showSelectExcel('exportExcelFrenadaAceleracionBrusca');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 11" class="btn btn-success" (click)="showSelectExcel('exportExcelDistraccionPosibleFatiga');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 12" class="btn btn-success" (click)="showSelectExcel('exportExcelCalificacionManejo');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 13" class="btn btn-success" (click)="showSelectExcel('exportExcelFatigaExtrema');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 14" class="btn btn-success" (click)="showSelectExcel('exportExcelAnticolisionFrontal');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 15" class="btn btn-success" (click)="showSelectExcel('exportExcelColisionConPeatones');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 16" class="btn btn-success" (click)="showSelectExcel('exportExcelDesvioCarrilIzquierda');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 17" class="btn btn-success" (click)="showSelectExcel('exportExcelDesvioCarrilDerecha');">EXPORTAR EXCEL</button>
      <button *ngIf="num_rep == 18" class="btn btn-success" (click)="showSelectExcel('exportExcelBloqueoVisionMobileye');">EXPORTAR EXCEL</button>

      <!-- <div style="display: flex; flex-direction: row; justify-content: center; gap: 4rem; margin: 0; padding: 0;">
        <button class="btn btn-success" (click)="exportExcelParadasMovimientos(1)">EXPORTAR EXCEL SEPARADO</button>
        <button class="btn btn-success" (click)="exportExcelParadasMovimientos(2)">EXPORTAR EXCEL JUNTO</button>
      </div> -->

        <!-- <md-button class="md-raised md-primary" ng-click="res.exportPdfParadasMovimientos()">EXPORTAR PDF</md-button>  -->
    </div>

  </ng-container>
</div>
