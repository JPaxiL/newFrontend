<div class="d-flex flex-column" style="height: 100%;">
  <div class="card-body p-fluid bg-gl-blue-dark" id="rowBusqueda" [innerHTML]="this.geofencesService.action == 'edit' ? 'Configurar Geocerca Poligonal' : 'Nueva Geocerca' "></div>

  <div class="modal-body panel-izq-container p-fluid overflow-auto" style="position: relative;">

    <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" name="spinnerLoading" size = "medium" color = "#fff" type = "ball-pulse" [fullScreen] = "false"><p style="color: white" class="text-center"> Guardando cambios... </p></ngx-spinner>

    <div class="panel-izq-form">

      <div class="gl-row-underline">
        <div class="flex contenedor">
          <div class="border mi-div center-icon btn-gl-save btn-dark-hover w-100" >
            <button type="button" *ngIf="geofencesService.showBtnAdd" (click)="clickAgregarGeocerca()" class="pentagon">

            </button>
            <label>Poligonales</label>
          </div>
          <div class="border mi mi-div center-icon btn-gl-save btn-dark-hover w-100">
            <button type="button" *ngIf="showBtnAdd" (click)="clickAgregarGeocercaCir()" class="circle">
              <i aria-hidden="true"></i>
            </button>
            <span>Circulares</span>
          </div>
          <div class="border mi mi-div center-icon btn-gl-save btn-dark-hover w-100">
            <button class="circle">
              
            </button>
            <span>Lineales</span>
          </div>
        </div>
        <div class="col-12">
            <label>NOMBRE:</label>
        </div>
        <div class="col-12">
          <input type="text" class="form-control" id="geofence-name" name="nombre" [(ngModel)]="form.nombre" required pInputText>
        </div>
      </div>

      <div class="gl-middleline gl-permanent-middleline gl-row-underline">
        <div class="row">
            <div class="col p-field">
                <div class="col-12">
                    <label>PERÍMETRO:</label>
                </div>
                <div class="row">
                    <div class="col-12">
                      <p-inputNumber [(ngModel)]="form.perimetro" suffix=" km" [disabled]="true"></p-inputNumber>
                    </div>
                </div>
            </div>
            <div class="col p-field">
                <div class="col-12">
                    <label>ÁREA:</label>
                </div>
                <div class="row">
                    <div class="col-12">
                      <p-inputNumber [(ngModel)]="form.area" suffix=" km&#178;" [disabled]="true"></p-inputNumber>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <!-- <div>
        <div class="col-12">
          <div class="row">
            <div class="col-6 d-flex flex-column justify-content-center text-start">
              <div class="input-group">
                <input type="text" class="form-control text-end" [(ngModel)]="form.perimetro" readonly>
                <span class="input-group-text">km</span>
              </div>
            </div>
            <div class="col-6 d-flex flex-column justify-content-center text-start">
              <div class="input-group">
                <input type="text" class="form-control text-end" [(ngModel)]="form.area"  readonly>
                <span class="input-group-text">km<sup>2</sup></span>
              </div>
            </div>
          </div>
        </div>
      </div> -->

      <div class="gl-middleline gl-permanent-middleline gl-row-underline">
        <div class="row">
            <div class="col p-field">
                <div class="col-12">
                    <label>COLOR DE GEOCERCA:</label>
                </div>
                <div class="row">
                    <div class="col-12 d-flex">
                      <input type="color" class="form-control form-control-color form-control-color-gl flex-grow-1" (change)="changeGeoColor(form.id)" [(ngModel)]="form.color" id="color_picker" title="Elige un color">
                      <label role="button" class="p-dropdown-trigger flex-none d-flex align-items-center custom-chevron" for="color_picker">
                        <span class="p-dropdown-trigger-icon pi pi-chevron-down" style="color: #6c757d;"></span>
                      </label>
                    </div>
                </div>
            </div>
            <div class="col p-field">
                <div class="col-12">
                    <label>VELOCIDAD:</label>
                </div>
                <div class="row">
                    <div class="col-12">
                      <p-dropdown [options]="booleanOptions" [(ngModel)]="form.checkVelocidad" optionLabel="label" optionValue="value" [appendTo]="'body'" [ngModelOptions]="{standalone: true}"></p-dropdown>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <div class="gl-middleline gl-permanent-middleline gl-row-underline">
        <div class="row">
            <div class="col p-field">
                <div class="col-12">
                    <label>COLOR DE TEXTO:</label>
                </div>
                <div class="row">
                    <div class="col-12 d-flex">
                      <input type="color" class="form-control form-control-color form-control-color-gl flex-grow-1" (change)="changeGeoColor(form.id)" [(ngModel)]="form.tag_name_color" id="text_color_picker" title="Elige un color">
                      <label role="button" class="p-dropdown-trigger flex-none d-flex align-items-center custom-chevron" for="text_color_picker">
                        <span class="p-dropdown-trigger-icon pi pi-chevron-down" style="color: #6c757d;"></span>
                      </label>
                    </div>
                </div>
            </div>
            <div class="col p-field">
                <div class="col-12">
                    <label>TAMAÑO DE TEXTO:</label>
                </div>
                <div class="row">
                    <div class="col-12">
                      <p-dropdown [options]="fontSizeOptions" [(ngModel)]="form.tag_name_font_size" optionLabel="label" optionValue="value" [appendTo]="'body'" [ngModelOptions]="{standalone: true}"></p-dropdown>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <div class="gl-row-underline">
        <div class="col-12">
            <label>LÍMITE DE VELOCIDAD:</label>
        </div>
        <div class="col-12 d-flex">
          <p-inputNumber class="flex-grow-1" [(ngModel)]="form.limite_velocidad" suffix=" Km/h" [disabled]="!form.checkVelocidad" [ngModelOptions]="{standalone: true}"></p-inputNumber>
          <span class="flex-none center-icon neutral-icon-color">
            <i class="fa fa-question-circle fa-lg" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="right" title="Establece un límite de velocidad estándar para todas las unidades que transiten dentro de la geocerca."></i>
          </span>
        </div>
      </div>
      <div class="gl-row-underline">
        <div class="col-12">
            <label>TOLERABLE:</label>
        </div>
        <div class="col-12 d-flex">
          <p-inputNumber class="flex-grow-1" [(ngModel)]="form.limite_tolerable" suffix=" Km/h" [disabled]="!form.checkVelocidad" [ngModelOptions]="{standalone: true}"></p-inputNumber>
          <span class="flex-none center-icon neutral-icon-color">
            <i class="fa fa-question-circle fa-lg" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="right" title="Establece un exceso de velocidad tolerable al sobrepasar el límite establecido en el presente campo. Termina hasta llegar al siguiente límite de velocidad."></i>
          </span>
        </div>
      </div>
      <div class="gl-row-underline">
        <div class="col-12">
            <label>GRAVE:</label>
        </div>
        <div class="col-12 d-flex">
          <p-inputNumber class="flex-grow-1" [(ngModel)]="form.limite_grave" suffix=" Km/h" [disabled]="!form.checkVelocidad" [ngModelOptions]="{standalone: true}"></p-inputNumber>
          <span class="flex-none center-icon neutral-icon-color">
            <i class="fa fa-question-circle fa-lg" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="right" title="Establece un exceso de velocidad grave al sobrepasar el límite establecido en el presente campo. Termina hasta llegar al siguiente límite de velocidad."></i>
          </span>
        </div>
      </div>
      <div class="gl-row-underline">
        <div class="col-12">
            <label>MUY GRAVE:</label>
        </div>
        <div class="col-12 d-flex">
          <p-inputNumber class="flex-grow-1" [(ngModel)]="form.limite_muy_grave" suffix=" Km/h" [disabled]="!form.checkVelocidad" [ngModelOptions]="{standalone: true}"></p-inputNumber>
          <span class="flex-none center-icon neutral-icon-color">
            <i class="fa fa-question-circle fa-lg" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="right" title="Establece un exceso de velocidad muy grave al sobrepasar el límite establecido en el presente campo. No posee un siguiente límite de velocidad."></i>
          </span>
        </div>
      </div>

      <div class="row justify-content-center mt-4 panel-izq-container-footer">
        <div class="col-6">
            <button type="button" class="btn-gl-cancel btn-dark-hover w-100" ui-sref="alertas-accesorios" (click)="clickCancelar(form.id)">Cancelar</button>
        </div>
        <div class="col-6">
            <button type="submit" class="btn-gl-save btn-dark-hover w-100" (click)="clickGuardar(form.id)">Guardar</button>
        </div>
      </div>

      

      <!-- <label class="row">
        <span class="col-4">Nombre:</span>
        <div class="col-8">
          <input type="text" class="form-control claseinputs" id="geofence-name" name="nombre" [(ngModel)]="form.nombre" [ngModelOptions]="{standalone: true}" required>
        </div>
      </label>

      <div class="row"></div>

      <label class="row">
        <span class="col-12">Descripción:</span>
        <div class="col-12">
          <textarea id="geocerca-descripcion" class="form-control" rows="3" name="descripcion" [(ngModel)]="form.descripcion"></textarea>
        </div>
      </label>

      <div class="row"></div>

      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-6 d-flex flex-column justify-content-center text-start">
              Perímetro
            </div>
            <div class="col-6 d-flex flex-column justify-content-center text-start">
              Área
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="row">
            <div class="col-6 d-flex flex-column justify-content-center text-start">
              <div class="input-group">
                <input type="text" class="form-control text-end" [(ngModel)]="form.perimetro" readonly>
                <span class="input-group-text">km</span>
              </div>
            </div>
            <div class="col-6 d-flex flex-column justify-content-center text-start">
              <div class="input-group">
                <input type="text" class="form-control text-end" [(ngModel)]="form.area"  readonly>
                <span class="input-group-text">km<sup>2</sup></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row"></div>

      <div class="row d-flex justify-content-center">
        <div class="col-5 d-flex flex-column justify-content-center">
          <label class="row">
            <span class="col-9 form-check-label align-middle">Mostrar geocerca</span>
            <div class="col-2 d-flex flex-column justify-content-center">
              <div class="form-check">
                <input type="checkbox" class="form-check-input" name="" icheck [(ngModel)]="form.checkZoneVisible">
              </div>
            </div>
          </label>
        </div>
        <div class="col-5 d-flex flex-column justify-content-center">
          <label class="row">
            <span class="col-9 form-check-label align-middle">Mostrar nombre</span>
            <div class="col-2 d-flex flex-column justify-content-center">
              <div class="form-check">
                <input type="checkbox" class="form-check-input" name="" icheck [(ngModel)]="form.checkNameVisible">
              </div>
            </div>
          </label>
        </div>
      </div>

      <div class="row"></div>

      <div class="row">
        <span class="col-4">Color:</span>
        <div class="col-8">
          <input type="color" class="form-control form-control-color form-control-color-gl" id="geoColor" (change)="changeGeoColor(form.id)" [(ngModel)]="form.color"  title="Elige un color">
        </div>
      </div>

      <div class="row"></div>

      <label class="row">
        <div class="col-4">Categoría:</div>
        <div class="col-8">
          <select class="form-control" id="opcionGraficoConsola" [(ngModel)]="form.categoria" title="Tipo de Gráfico" data-bs-toggle="tooltip" data-bs-placement="top">
            <option [value]="item.id" *ngFor="let item of availableOptionsCategoria">{{item.name}}</option>
          </select>
        </div>
      </label>

      <div class="row"></div>

      <div class="row d-flex justify-content-center">
        <div class="col-5 d-flex flex-column justify-content-center">
          <label class="row">
            <span class="col-9 form-check-label align-middle">Velocidad</span>
            <div class="col-2 d-flex flex-column justify-content-center">
              <div class="form-check">
                <input type="checkbox" class="form-check-input" id="chckActivarVelocidad" [(ngModel)]="form.checkVelocidad">
              </div>
            </div>
          </label>
        </div>
        <div class="col-5"></div>
      </div>

      <div class="row"></div>

      <div class="row">
        <span class="col-4 text-end">Límite de Velocidad:</span>
        <div class="col-8">
          <div class="input-group">
            <input min="10" type="number" class="form-control claseinputs text-center" [(ngModel)]="form.limite_velocidad" [disabled]="!form.checkVelocidad">
            <span class="input-group-text claseinputs">km/h</span>
          </div>
        </div>
      </div>
      <div class="row">
        <span class="col-4 text-end">Tolerable:</span>
        <div class="col-8">
          <div class="input-group">
            <input type="number" [min]="form.limite_velocidad + 1" class="form-control claseinputs text-center" [(ngModel)]="form.limite_tolerable" [disabled]="!form.checkVelocidad">
            <span class="input-group-text claseinputs">km/h</span>
          </div>
        </div>
      </div>
      <div class="row">
        <span class="col-4 text-end">Grave:</span>
        <div class="col-8">
          <div class="input-group">
            <input type="number" [min]="form.limite_tolerable + 1" class="form-control claseinputs text-center" [(ngModel)]="form.limite_grave" [disabled]="!form.checkVelocidad">
            <span class="input-group-text claseinputs">km/h</span>
          </div>
        </div>
      </div>
      <div class="row">
        <span class="col-4 text-end">Muy Grave:</span>
        <div class="col-8">
          <div class="input-group">
            <input type="number" [min]="form.limite_grave + 1" class="form-control  claseinputs text-center" [(ngModel)]="form.limite_muy_grave" [disabled]="!form.checkVelocidad">
            <span class="input-group-text claseinputs">km/h</span>
          </div>
        </div>
      </div>

      <div class="row"></div>
      <div class="row"></div>
    </div>

    <div class="modal-footer">
      <div class="row w-100 justify-content-around">
        <div class="col-5">
          <button type="button" (click)="clickCancelar(form.id)" class="btn btn-success w-100" >Cancelar</button>
        </div>
        <div class="col-5">
          <button type="submit" (click)="clickGuardar(form.id)" class="btn btn-success w-100" >Guardar</button>
        </div>
      </div>
    </div> -->

  </div>
</div>

