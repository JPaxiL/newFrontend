(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{X3zk:function(e,n,t){"use strict";t.r(n),t.d(n,"LoginModule",function(){return _});var o=t("ofXK"),i=t("tyNb"),r=t("mrSG"),a=t("3Pt+"),s=t("jThn"),c=t("fXoL"),l=t("AcyG"),g=t("1kSV"),d=t("AytR"),b=t("tk/3");let u=(()=>{class e{constructor(e){this.http=e}getAll(){return this.http.get(d.a.apiUrl+"/api/user")}getUsers(e){return this.http.get(d.a.apiUrl+"clientes?page="+e)}setUserInLocalStorage(){return Object(r.b)(this,void 0,void 0,function*(){yield this.http.get(`${d.a.apiUrl}/api/user`).toPromise().then(e=>{localStorage.setItem("user_id",e.data.id)})})}}return e.\u0275fac=function(n){return new(n||e)(c.dc(b.b))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=t("Eq0F"),f=t("mEh3"),m=t("6mAC"),v=t("EdFl");function h(e,n){if(1&e){const e=c.Xb();c.Wb(0,"div",44),c.Wb(1,"div",45),c.Sc(2),c.Vb(),c.Wb(3,"div",46),c.Wb(4,"button",47),c.gc("click",function(){return c.Ic(e),c.kc().resetLoginAlert()}),c.Vb(),c.Vb(),c.Vb()}if(2&e){const e=c.kc();c.Db(2),c.Uc(" ",e.errMsg," ")}}function C(e,n){1&e&&(c.Wb(0,"div"),c.Sc(1,"Iniciar Sesi\xf3n"),c.Vb())}function M(e,n){1&e&&(c.Wb(0,"div"),c.Rb(1,"span",48),c.Vb())}const w=[{path:"",component:(()=>{class e{constructor(e,n,t,o,i,r,a,s,c){this.store=e,this.router=n,this.fb=o,this.userService=i,this.eventService=r,this.eventSocketService=a,this.userDataService=s,this.vehicleService=c,this.showNavigationArrows=!1,this.showNavigationIndicators=!1,this.images=["./assets/images/login/background_cc.png","./assets/images/login/background_city.png"],this.validCredentials=0,this.isLoggingIn=!1,this.errMsg="",t.showNavigationArrows=!0,t.showNavigationIndicators=!0,t.interval=5e3,t.wrap=!0}ngOnInit(){this.loginForm=this.fb.group({name:["",a.w.required],password:["",a.w.required]})}resetLoginAlert(){this.validCredentials=0}save(){if(console.log("LOGIN ISVALID: ",this.loginForm.valid),this.loginForm.valid){const e=this.loginForm.value;this.isLoggingIn=!0,this.store.dispatch(new s.b(e.name,e.password)).subscribe(e=>{this.validCredentials=1,console.log("Inicio de sesi\xf3n exitoso"),this.startSession()},e=>{switch(e.error.error){case"invalid_grant":this.errMsg="Nombre de Usuario o Contrase\xf1a inv\xe1lidos";break;case"inactive_user":this.errMsg="Tu cuenta a\xfan no ha sido activada";break;case"user_not_found":this.errMsg="El usuario no existe";break;default:this.errMsg="Hubo un error. Int\xe9ntalo nuevamente"}this.isLoggingIn=!1,this.validCredentials=-1})}}startSession(){return Object(r.b)(this,void 0,void 0,function*(){console.log("starting SESION"),yield this.userService.setUserInLocalStorage(),this.router.navigate(["/panel"],{state:{recentLogIn:!0}}),this.eventSocketService.user_id=localStorage.getItem("user_id"),this.eventSocketService.initializeSocket(this.eventSocketService.user_id),this.eventService.getAll(),this.eventSocketService.listen()})}}return e.\u0275fac=function(n){return new(n||e)(c.Qb(l.g),c.Qb(i.b),c.Qb(g.a),c.Qb(a.c),c.Qb(u),c.Qb(p.a),c.Qb(f.a),c.Qb(m.a),c.Qb(v.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-login"]],decls:60,vars:5,consts:[[1,"main-background"],["src","./assets/images/login/login-background.png",1,"mh-100",2,"width","100%","height","100vh","object-fit","cover"],[1,"color-overlay"],[1,"overlay","h-100","position-absolute","d-flex","flex-column"],[1,"row","w-100","flex-grow-1"],[1,"col-5","offset-1","d-flex","justify-content-center"],[1,"row","d-flex","flex-column","align-items-center"],[1,"welcome-panel"],[1,"row"],[1,"col-12","logo","align-self-start","mb-4"],["src","./assets/images/logo-gl-tracker.svg","alt","logo",1,"load"],[1,"col-12"],[1,"logo-underline","align-self-start","mb-4"],[1,"row","futura-md-bt-bold"],[1,"col-5","d-flex","justify-content-center"],[1,"login-panel","general-font"],[1,"row","error-msg"],["class","d-flex alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row","input-header","mb-3"],["autocomplete","on","novalidate","",1,"row","gap-3",3,"formGroup"],["formControlName","name","type","text","placeholder","Nombre de usuario"],["formControlName","password","type","password","placeholder","Contrase\xf1a"],["type","submit",1,"btn","btn-success","w-100",3,"disabled","click"],[4,"ngIf"],[1,"row","mt-3","text-center"],[1,"input-forgot"],[1,"input-contact"],[1,"row","my-3",2,"height","1px","background-color","#fff"],[1,"row","mt-3","input-footer","text-center"],[1,"row","w-100"],[1,"overlay-footer","general-font"],[1,"row","justify-content-center"],[1,"text-center"],[1,"align-self-center","my-3",2,"width","28rem","height","1px","background-color","#fff"],[1,"col-12","pb-4","d-flex","flex-wrap","justify-content-center","align-items-center","certif-logos-container"],["src","./assets/images/login/footer-iso-29110.svg",1,"load"],["src","./assets/images/login/footer-ntp.svg",1,"load"],["src","./assets/images/login/footer-moprosoft.svg",1,"load"],["src","./assets/images/login/footer-apesoft.svg",1,"load"],["src","./assets/images/login/footer-mtc.svg",1,"load"],["src","./assets/images/login/footer-sutran.svg",1,"load"],["src","./assets/images/login/footer-ccl.svg",1,"load"],["src","./assets/images/login/footer-indecopi.png",1,"load"],["src","./assets/images/login/footer-osinergmin.svg",1,"load"],["role","alert",1,"d-flex","alert","alert-danger","alert-dismissible","fade","show"],[1,"flex-grow-1"],[1,"btn-close-container"],["type","button","aria-label","Cerrar",1,"btn-close","btn-close-white",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,n){1&e&&(c.Wb(0,"div",0),c.Rb(1,"img",1),c.Rb(2,"div",2),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"div",5),c.Wb(6,"div",6),c.Wb(7,"div",7),c.Wb(8,"div",8),c.Wb(9,"div",9),c.Rb(10,"img",10),c.Vb(),c.Wb(11,"div",11),c.Rb(12,"div",12),c.Vb(),c.Vb(),c.Wb(13,"div",13),c.Wb(14,"p"),c.Sc(15,"PLATAFORMA"),c.Vb(),c.Wb(16,"p"),c.Sc(17,"DE MONITOREO"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(18,"div",14),c.Wb(19,"div",6),c.Wb(20,"div",15),c.Wb(21,"div",16),c.Qc(22,h,5,1,"div",17),c.Vb(),c.Wb(23,"div",18),c.Wb(24,"span"),c.Sc(25,"Ingrese sus datos:"),c.Vb(),c.Vb(),c.Wb(26,"form",19),c.Rb(27,"input",20),c.Rb(28,"input",21),c.Wb(29,"button",22),c.gc("click",function(){return n.save()}),c.Qc(30,C,2,0,"div",23),c.Qc(31,M,2,0,"div",23),c.Vb(),c.Vb(),c.Wb(32,"div",24),c.Wb(33,"p",25),c.Sc(34,"\xbfOlvidaste tu nombre de usuario o contrase\xf1a?"),c.Vb(),c.Wb(35,"p",26),c.Sc(36,"Cont\xe1ctate con el administrador de nuestro servicio"),c.Vb(),c.Vb(),c.Rb(37,"div",27),c.Wb(38,"div",28),c.Wb(39,"p"),c.Sc(40,"Sistema de Monitoreo Vehicular GL Tracker Sur S.A.C."),c.Vb(),c.Wb(41,"p"),c.Sc(42,"Todos los derechos reservados - 2022"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(43,"div",29),c.Wb(44,"div",30),c.Wb(45,"div",11),c.Wb(46,"div",31),c.Wb(47,"p",32),c.Sc(48,"Nuestras Certificaciones"),c.Vb(),c.Rb(49,"div",33),c.Vb(),c.Vb(),c.Wb(50,"div",34),c.Rb(51,"img",35),c.Rb(52,"img",36),c.Rb(53,"img",37),c.Rb(54,"img",38),c.Rb(55,"img",39),c.Rb(56,"img",40),c.Rb(57,"img",41),c.Rb(58,"img",42),c.Rb(59,"img",43),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Db(22),c.rc("ngIf",-1==n.validCredentials&&!n.isLoggingIn),c.Db(4),c.rc("formGroup",n.loginForm),c.Db(3),c.rc("disabled",n.loginForm.invalid||n.isLoggingIn),c.Db(1),c.rc("ngIf",!n.isLoggingIn),c.Db(1),c.rc("ngIf",n.isLoggingIn))},directives:[o.m,a.x,a.m,a.e,a.b,a.l,a.d],styles:[".futura-md-bt-bold[_ngcontent-%COMP%]{font-family:Futura-MD-BT-Bold,Verdana-Bold,sans-serif}.alert-danger[_ngcontent-%COMP%]{color:#fff;background-color:#b83f38;border:none}.general-font[_ngcontent-%COMP%]{font-family:var(--general-font-family)}.btn-close[_ngcontent-%COMP%]:hover{background:#0000 url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e\") 50%/1em auto no-repeat}.main-background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;object-fit:cover}.main-background[_ngcontent-%COMP%]   .color-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background-color:var(--gl-blue-dark-alpha)}.overlay[_ngcontent-%COMP%]{position:absolute;z-index:12;width:100%;height:100%;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;overflow:visible}.welcome-panel[_ngcontent-%COMP%]{color:#fff;font-size:4.5rem;line-height:4.5rem}.welcome-panel[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%] > .load[_ngcontent-%COMP%]{width:240px;height:auto}.welcome-panel[_ngcontent-%COMP%]   .logo-underline[_ngcontent-%COMP%]{width:3ch;height:.25ch;background-color:var(--gl-yellow)}.login-panel[_ngcontent-%COMP%], .welcome-panel[_ngcontent-%COMP%]{padding-top:20vh}.login-panel[_ngcontent-%COMP%]{--input-radius:1.8rem;max-width:26rem;color:#fff}.login-panel[_ngcontent-%COMP%]   .input-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:var(--input-radius);font-size:1.25rem;font-weight:700}.login-panel[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]{border-radius:var(--input-radius);padding-left:var(--input-radius)}.login-panel[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]   .btn-close-container[_ngcontent-%COMP%]{height:100%;width:1.125rem;display:flex;align-items:center;overflow-x:visible;padding-left:1.125rem}.login-panel[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]   .btn-close-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:static;padding:0;margin-right:-1.125rem}.login-panel[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]   button.btn-close[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none}.login-panel[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > input[type=text][_ngcontent-%COMP%], .login-panel[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{background-color:var(--gl-blue-dark-alpha);color:#fff;height:calc(var(--input-radius) * 2);border:1px solid #fff;border-radius:var(--input-radius);padding:var(--input-radius);font-size:calc(var(--input-radius) * 3 / 5)}.login-panel[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > input[type=text][_ngcontent-%COMP%]::placeholder, .login-panel[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]::placeholder{color:#91d8f7}.login-panel[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > input[type=text][_ngcontent-%COMP%]:focus, .login-panel[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none}.login-panel[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{border:none;height:calc(var(--input-radius) * 2);border-radius:var(--input-radius);background-color:var(--gl-yellow);font-size:calc(var(--input-radius) * 2 / 3);font-weight:500;color:var(--gl-blue-dark)}.login-panel[_ngcontent-%COMP%]   .input-forgot[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:500}.login-panel[_ngcontent-%COMP%]   .input-contact[_ngcontent-%COMP%]{font-size:1rem}.login-panel[_ngcontent-%COMP%]   .input-footer[_ngcontent-%COMP%]{line-height:1.125rem}.overlay-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-content:center;width:100%}.overlay-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1.125rem}.overlay-footer[_ngcontent-%COMP%]   .certif-logos-container[_ngcontent-%COMP%]{column-gap:4vw;row-gap:.75rem;padding-left:4.5%;padding-right:4.5%}.overlay-footer[_ngcontent-%COMP%]   .certif-logos-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:8rem;max-height:4rem}label[_ngcontent-%COMP%]{display:flex;column-gap:5px;align-items:center}p[_ngcontent-%COMP%]{margin:0}.ok-btn[_ngcontent-%COMP%]{color:#fff;background-color:#76c04e;font-size:1.75rem;padding:.6rem 2.5rem}.demo-btn[_ngcontent-%COMP%]{margin-top:1.25rem;margin-bottom:4rem}button[_ngcontent-%COMP%]:hover{background-image:linear-gradient(rgba(0,0,0,.125) 0 0)}"]}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({imports:[[i.e.forChild(w)],i.e]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({imports:[[o.b,O,g.g,a.f,a.t]]}),e})()}}]);