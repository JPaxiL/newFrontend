{"version":3,"sources":["./src/app/dashboard/service/users.service.ts","./src/app/login/components/login.component.ts","./src/app/login/components/login.component.html","./src/app/login/login.module.ts","./src/app/login/login-routing.module.ts"],"names":[],"mappings":"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","file":"login-login-module.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ResponseInterface } from 'src/app/core/interfaces/response-interface';\nimport { environment } from 'src/environments/environment';\n\nexport interface User {\n  name: string;\n  email: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UsersService {\n  user:any;\n  constructor(private http: HttpClient) {\n  }\n\n  getAll(): Observable<User[]> {\n    return this.http.get<User[]>( environment.apiUrl + `/api/user`);\n  }\n\n  public getUsers(currentPage: string): Observable<User> {\n    //console.log(environment.apiUrl , currentPage);\n    return this.http.get<User>(environment.apiUrl + 'clientes?page=' + currentPage);\n      // .map(res => res.json());\n  }\n\n  public async setUserInLocalStorage(){\n    await this.http.get<ResponseInterface>(`${environment.apiUrl}/api/user`)\n    .toPromise()\n    .then( res => {\n      localStorage.setItem('user_id',res.data.id)\n    });\n  }\n}\n","import { Component, OnInit, ɵsetCurrentInjector } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { NgbCarouselConfig } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngxs/store';\nimport { SignIn } from 'src/app/core/store/auth.actions';\nimport { UsersService } from 'src/app/dashboard/service/users.service';\nimport { EventSocketService } from 'src/app/events/services/event-socket.service';\nimport { EventService } from 'src/app/events/services/event.service';\nimport { UserDataService } from 'src/app/profile-config/services/user-data.service';\nimport { VehicleService } from 'src/app/vehicles/services/vehicle.service';\n\nexport interface User {\n  name: string;\n  password: string;\n}\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n\n  showNavigationArrows = false;\n  showNavigationIndicators = false;\n  images = [\n    `./assets/images/login/background_cc.png`,\n    `./assets/images/login/background_city.png`\n  ];\n\n  loginForm!: FormGroup;\n  validCredentials = 0; //-1 es credenciales fallidas, 0 es estado inicial, 1 es login exitoso\n  isLoggingIn = false;\n  errMsg = '';\n\n  constructor(\n    private store: Store,\n    private router: Router,\n    config: NgbCarouselConfig,\n    private fb: FormBuilder,\n    public userService: UsersService,\n    public eventService: EventService,\n    private eventSocketService: EventSocketService,\n    private userDataService: UserDataService,\n    private vehicleService: VehicleService,\n    ) {\n    // customize default values of carousels used by this component tree\n    config.showNavigationArrows = true;\n    config.showNavigationIndicators = true;\n\n    config.interval = 5000;\n    config.wrap = true;\n  }\n\n  ngOnInit(): void {\n    this.loginForm = this.fb.group({\n      name: ['', Validators.required  ],\n      password: ['', Validators.required ]\n    });\n  }\n\n  resetLoginAlert(): void {\n    this.validCredentials = 0;\n  }\n\n  save(): void{\n    if (this.loginForm.valid) {\n      const params = this.loginForm.value;\n      // params['registrador_id'] = params['registrador']['id'];\n      this.isLoggingIn = true;\n      //console.log(params);\n      this.store.dispatch(new SignIn( params.name, params.password)).subscribe( (data) => {\n        // Animación de carga de Iniciando sesión...\n        this.validCredentials = 1;\n        //console.log('Inicio de sesión exitoso');\n        //console.log(data);\n        this.startSession();\n        /* this.userService.setUserInLocalStorage();\n        this.router.navigate(['/panel'], {\n          state: {\n            //flag para mostrar toast de bienvenida\n            recentLogIn: true,\n          }\n        });\n        this.eventSocketService.listen(); */\n      },\n      error => {\n        // if(error.status == 400){\n        switch(error.error.error){\n          case 'invalid_grant': this.errMsg = 'Nombre de Usuario o Contraseña inválidos'; break;\n          case 'inactive_user': this.errMsg = 'Tu cuenta aún no ha sido activada'; break;\n          case 'user_not_found': this.errMsg = 'El usuario no existe'; break;\n          default: this.errMsg = 'Hubo un error. Inténtalo nuevamente'; break;\n        }\n        this.isLoggingIn = false;\n        //console.log(error.error.error);\n        this.validCredentials = -1;\n      });\n\n      // let categoria = <Categoria>params;\n      // this.confirmSave(categoria);\n    }else{\n\n    }\n  }\n\n  async startSession(){\n    await this.userService.setUserInLocalStorage();\n    this.router.navigate(['/panel'], {\n      state: {\n        //flag para mostrar toast de bienvenida\n        recentLogIn: true,\n      }\n    });\n    this.eventSocketService.user_id = localStorage.getItem('user_id');\n    this.vehicleService.initialize();\n    this.eventService.getAll();\n    this.eventSocketService.listen();\n    this.userDataService.getUserData();\n  }\n}\n","<div class=\"main-background\">\n  <img src=\"./assets/images/login/login-background.png\" class=\"mh-100\" style=\"width: 100%; height: 100vh; object-fit: cover;\">\n  <div class=\"color-overlay\"></div>\n</div>\n\n<div class=\"overlay h-100 position-absolute d-flex flex-column\">\n  <div class=\"row w-100 flex-grow-1\">\n    <div class=\"col-5 offset-1 d-flex justify-content-center\">\n      <div class=\"row d-flex flex-column align-items-center\">\n        <div class=\"welcome-panel\">\n          <div class=\"row\">\n            <div class=\"col-12 logo align-self-start mb-4\">\n              <img class=\"load\" src=\"./assets/images/logo-gl-tracker.svg\" alt=\"logo\">\n            </div>\n            <div class=\"col-12\">\n              <div class=\"logo-underline align-self-start mb-4\"></div>\n            </div>\n          </div>\n          <div class=\"row futura-md-bt-bold\">\n            <p>PLATAFORMA</p>\n            <p>DE MONITOREO</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-5 d-flex justify-content-center\">\n      <div class=\"row d-flex flex-column align-items-center\">\n        <div class=\"login-panel general-font\">\n\n          <div class=\"row error-msg\">\n            <div *ngIf=\"validCredentials == -1 && !isLoggingIn\" class=\"d-flex alert alert-danger alert-dismissible fade show\" role=\"alert\">\n              <div class=\"flex-grow-1\">\n                {{errMsg}}\n              </div>\n              <div class=\"btn-close-container\">\n                <button (click)=\"resetLoginAlert()\" type=\"button\" class=\"btn-close btn-close-white\" aria-label=\"Cerrar\"></button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"row input-header mb-3\">\n            <span>Ingrese sus datos:</span>\n          </div>\n\n          <form [formGroup]=\"loginForm\" autocomplete=\"on\" novalidate class=\"row gap-3\">\n            <input formControlName=\"name\" type=\"text\" placeholder=\"Nombre de usuario\">\n            <input formControlName=\"password\" type=\"password\" placeholder=\"Contraseña\">\n            <button \n              type=\"submit\"\n              [disabled]=\"loginForm.invalid || isLoggingIn\" \n              class=\"btn btn-success w-100\" \n              (click)=\"save()\">\n              <div *ngIf=\"!isLoggingIn\">Iniciar Sesión</div>\n              <div *ngIf=\"isLoggingIn\">\n                <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n              </div>\n            </button>\n          </form>\n\n          <div class=\"row mt-3 text-center\">\n            <p class=\"input-forgot\">¿Olvidaste tu nombre de usuario o contraseña?</p>\n            <p class=\"input-contact\">Contáctate con el administrador de nuestro servicio</p>\n            <!-- <p class=\"input-contact text-center\">Contáctate con el administrador llamando al 052-290220</p> -->\n          </div>\n\n          <div class=\"row my-3\" style=\"height: 1px; background-color: #fff\"></div>\n\n          <div class=\"row mt-3 input-footer text-center\">\n            <p>Sistema de Monitoreo Vehicular GL Tracker Sur S.A.C.</p>\n            <p>Todos los derechos reservados - 2022</p>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Footer -->\n  <div class=\"row w-100\">\n    <div class=\"overlay-footer general-font\" >\n      <div class=\"col-12\">\n        <div class=\"row justify-content-center\">\n          <p class=\"text-center\">Nuestras Certificaciones</p>\n          <div class=\"align-self-center my-3\" style=\"width: 28rem; height: 1px; background-color: #fff\"></div>\n        </div>\n        \n      </div>\n      <div class=\"col-12 pb-4 d-flex flex-wrap justify-content-center align-items-center certif-logos-container\">\n        <img class=\"load\" src=\"./assets/images/login/footer-iso-29110.svg\">\n        <img class=\"load\" src=\"./assets/images/login/footer-ntp.svg\">\n        <img class=\"load\" src=\"./assets/images/login/footer-moprosoft.svg\">\n        <img class=\"load\" src=\"./assets/images/login/footer-apesoft.svg\">\n        <img class=\"load\" src=\"./assets/images/login/footer-mtc.svg\">\n        <img class=\"load\" src=\"./assets/images/login/footer-sutran.svg\">\n        <img class=\"load\" src=\"./assets/images/login/footer-ccl.svg\">\n        <img class=\"load\" src=\"./assets/images/login/footer-indecopi.png\">\n        <img class=\"load\" src=\"./assets/images/login/footer-osinergmin.svg\">\n      </div>\n  \n    </div>\n  </div>\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { LoginRoutingModule } from './login-routing.module';\nimport { LoginComponent } from './components/login.component';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [\n    LoginComponent\n  ],\n  imports: [\n    CommonModule,\n    LoginRoutingModule,\n    NgbModule,\n    FormsModule,\n    ReactiveFormsModule\n  ]\n})\nexport class LoginModule { }\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LoginComponent } from './components/login.component';\n\nconst routes: Routes = [{ path: '', component: LoginComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule { }\n"],"sourceRoot":"webpack:///"}